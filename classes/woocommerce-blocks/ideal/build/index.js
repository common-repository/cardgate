(()=>{"use strict";let e=window.wc.wcBlocksRegistry,t=window.wp.i18n,a=window.wc.wcSettings,o=window.wp.htmlEntities,c=window.React,n=window.JSON,l=(0,a.getSetting)("cardgateideal_data",{}),s=(0,t.__)("iDEAL","wc_payment_method_cardgateideal"),r=(0,o.decodeEntities)(l.title)||s,m=n.parse(l.issuers),i=e=>{let[a,n]=(0,c.useState)(""),{eventRegistration:s,emitResponse:r}=e,{onPaymentSetup:i}=s;c.useEffect(()=>{let t=(e,t)=>{let a="<span class='wc-block-formatted-money-amount wc-block-components-formatted-money-amount wc-block-components-totals-item__value'>"+(t+e)+"</span>";jQuery(".wc-block-components-totals-footer-item .wc-block-formatted-money-amount:first").replaceWith(a)},a=(e,t)=>{let a="<span class='wc-block-formatted-money-amount wc-block-components-formatted-money-amount wc-block-components-totals-item__value'>"+(t+e)+"</span>";jQuery("div.wp-block-woocommerce-checkout-order-summary-taxes-block.wc-block-components-totals-wrapper > div > span.wc-block-formatted-money-amount.wc-block-components-formatted-money-amount.wc-block-components-totals-item__value:first").replaceWith(a)};jQuery.ajax({url:l.feeUrl,method:"POST",data:{action:"wp_ajax_cardgate_checkout_fees",method:e.activePaymentMethod},complete:function e(t,a){},success:function e(o,c,n){let l=jQuery(".wc-block-components-totals-fees");if(o.data.amount){let s="<div class='wc-block-components-totals-item wc-block-components-totals-fees'><span class='wc-block-components-totals-item__label'>"+o.data.name+"</span><span class='wc-block-formatted-money-amount wc-block-components-formatted-money-amount wc-block-components-totals-item__value'>"+o.data.currency+o.data.amount.toFixed(2).replace(".",",")+"</span><div class='wc-block-components-totals-item__description'></div></div>";l.length?(l.replaceWith(s),t(o.data.newTotal.toFixed(2).replace(".",","),o.data.currency),a(o.data.totalTax.toFixed(2).replace(".",","),o.data.currency)):(jQuery(".wc-block-components-totals-item:first").after(s),t(o.data.newTotal.toFixed(2).replace(".",","),o.data.currency),a(o.data.totalTax.toFixed(2).replace(".",","),o.data.currency))}else null==l||l.hide(),t(o.data.newTotal.toFixed(2).replace(".",","),o.data.currency),a(o.data.totalTax.toFixed(2).replace(".",","),o.data.currency)},error:function e(t,a,o){console.warn(a,o)}})}),(0,c.useEffect)(()=>{let e=i(async()=>{let e=a;return e.length?{type:r.responseTypes.SUCCESS,meta:{paymentMethodData:{cardgateideal_issuer:e}}}:{type:r.responseTypes.ERROR,message:(0,t.__)(" Choose your bank first, please","cardgate")}});return()=>{e()}},[r.responseTypes.ERROR,r.responseTypes.SUCCESS,i,a]);var d=c.createElement("div",null,(0,o.decodeEntities)(l.description||"")),p=c.createElement("select",{name:"issuers",value:a,onChange(e){let t=e.target.value;n(t)}},...m.map((e,t)=>c.createElement("option",{value:e.value},e.name)));return c.createElement("div",null,p,d)},d={name:"cardgateideal",label:c.createElement(e=>{var t=c.createElement("img",{src:l.icon,width:28,height:24,style:{display:"inline"}});return l.show_icon||(t=null),c.createElement("span",{className:"wc-block-components-payment-method-label wc-block-components-payment-method-label--with-icon"},t,(0,o.decodeEntities)(l.title)||s)},null),content:c.createElement(i,null),edit:c.createElement(i,null),icons:null,canMakePayment:e=>!0,ariaLabel:r,supports:{features:c.supports}};(0,e.registerPaymentMethod)(d)})();